<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <script>
        function operations(){
        data.innerHTML()

        }
    </script> -->
    <script>
        let users=[];
        let useremail=""
        let username=""
        let currbalance=0

        function showUser(){
            let str=""

            for(let i=0;i<users.length;i++){
                str+='<'
            }
        }

        function saveData(){
            let amount=Number(document.getElementById("amount").value)
            let type=document.getElementById("type").value
            for(let i=0;i<users.length;i++){
                if(users[i].email==useremail){
                    if(type=="1"){
                        users[i].balance+=amount
                    }else if(type=="2"){
                        if(amount<users[i].balance){
                       users[i].balance-=amount
                        } else{
                        spBalance.innerHTML="Insufficient Balance"
                        break
                    }
                }esle if(type=="3"){
                    
                }
                    spBalance.innerHTML=users[i].balance
                    break
               
            }
        }
    }

        function home(){
            let str=`
                <h2>Welcome! ${username}</h2>
            <button onclick="showLogin()">Logout</button>
            <p><input type="number" id="amount" placeholder="Enter Amount"></p>
            <p><select id="type">
               <option value=0>--Select--</option>
               <option value=1>Deposit</option>
               <option value=2>Withdraw</option>
                <option value=3>Transfer</option>
               </select></p>
               <button onclick='saveData()'>Submit</button>
               <p>Current Balance: <span id='spBalance'>${currbalance}</span></p>
               

            `;
        root.innerHTML = str;
        }

        function addUser(){
            let name=document.getElementById("name").value
            let email=document.getElementById("email").value
            let password=document.getElementById("password").value
            let user={
                name: name,
                email: email,
                password: password,
                balance:0
            };
            users.push(user);
            showLogin();
        }


         function login(){
            let email=document.getElementById("email").value
            let password=document.getElementById("password").value
            for(let i=0;i<users.length;i++){
                if(users[i].email==email && users[i].password==password){
                    useremail=email;
                    username = users[i].name
                    currbalance=users[i].balance
                home();
                break;
        }
        else{
            msg.innerHTML="Access Denied"  
        }
    }
    }

      function showForm(){
            let str1=`
            <div>
            <h2>Create Account</h2>
            <label for="Username">Username: </label>
            <input type="text" id="name" placeholder="Enter your Username"><br><br>
             <label for="email">Email: </label>
            <input type="email" id="email" placeholder="Enter your Email"><br><br>
            <label for="password">Password: </label>
            <input type="password" id="password" placeholder="Enter Password"><br><br>
            <button onclick="addUser()">Submit</button>
            <p>Already a member?<button onclick='showLogin()'>Login</button>
            </div>
            `
            root.innerHTML=str1;
            
        }
       

        function showLogin(){
            let str=`
        <div>
            <h2>Login Form</h2>
            <div id='msg'></div>
            <p><input id="email" type="text"></p>
            <p><input id="password" type="password"></p>
            <button onclick="login()"">Login</button>
            <p><button onclick="showForm()">Create account</button></p>
        </div>
        `
       
          root.innerHTML=str;
            }
    </script>
</head>
<body onload="showLogin()">
    <h1>SBI Bank</h1>
    <hr/>
    <div id="root"></div>
    <hr/>
    <footer><p>@Copyright 2005.All rights reserved</p></footer>
</body>
</html>